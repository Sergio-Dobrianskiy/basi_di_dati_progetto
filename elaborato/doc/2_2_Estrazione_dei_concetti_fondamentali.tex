\subsubsection{Entità e Attributi}
Lo schema va analizzato per individuarne le parole e le espressioni chiave, con queste verrà realizzato un primo schema riassuntivo che verrà raffinato in seguito. I termini di rilievo appaiono nel testo con un colore diverso:

\begin{adjustwidth}{\indent1}{\indent1}
"La software house CityNet© richiede un sistema informativo per la gestione del servizio \speciale{CityCard} che consenta agli \speciale{utenti} di \specialeb{acquistare} \speciale{abbonamenti} e \specialeb{accedere} a \speciale{servizi} ed \speciale{eventi} forniti da \speciale{enti} affiliati. \speciale{CityCard} può essere \specialeb{emessa} sia in formato fisico che virtuale (online) e ha una durata di 5 anni, l'\specialeb{emissione} della carta è gratuita e ogni \speciale{utente} ne può avere attiva al massimo una.

L'utilizzo della \speciale{CityCard} necessita la \specialeb{sottoscrizione} di un \speciale{abbonamento} a scelta tra tre \speciale{tipologie}, ciascuna con una durata e un prezzo specifici. L'\speciale{abbonamento} permette agli \speciale{utenti} di \specialeb{acquistare} \speciale{servizi} o \specialeb{prenotare} eventi forniti dagli \speciale{enti} partner con uno \speciale{sconto} che varia dalla \speciale{durata} dell'abbonamento.
Il servizio deve essere fornito su un \speciale{sito} al quale l'\speciale{utente} si deve \specialeb{registrare}.

Gli utenti si suddividono in tre categorie: \speciale{cliente}, \speciale{fornitore} e \speciale{admin} o \speciale{amministratore}. Una persona può \specialeb{creare} più di un \speciale{account}.

Gli \speciale{enti} sono gestiti da \speciale{utenti} di tipo "\speciale{fornitore}", i quali, una volta \specialeb{associati} a un \speciale{ente}, hanno la possibilità di \specialeb{creare} nuovi \speciale{servizi} o \speciale{eventi}. 

Al primo \specialeb{login} gli \speciale{utenti} di tipo "\speciale{cliente}" possono solamente \specialeb{ottenere} una \speciale{CityCard} e \specialeb{gestire} le \speciale{carte di credito}. Dopo l'\specialeb{attivazione} potranno accedere anche alla sezione \speciale{abbonamenti}. Una volta \specialeb{sottoscritto} l'\speciale{abbonamento} potranno accedere a tutti i \speciale{servizi}.

I \speciale{clienti} potranno aggiungere più di una \speciale{carta di credito} e renderne una predefinita per i pagamenti.

I \speciale{clienti} possono \specialeb{acquistare} i \speciale{servizi} forniti utilizzando la \speciale{carta di credito} predefinita e godendo dello \speciale{sconto} già nominato in precedenza. La \speciale{CityCard} permette anche di \specialeb{partecipare} agli \speciale{eventi} gratuiti e di \specialeb{usufruire} gratuitamente del \speciale{trasporto pubblico}. 
I clienti, inoltre, avranno la possibilità di \specialeb{lasciare} una \speciale{recensione} sui \speciale{servizi} \specialeb{acquistati}.

L'utente di tipo "\speciale{admin}" ha la facoltà di \specialeb{bannare} gli altri \speciale{utenti}, \specialeb{resettare} le \speciale{recensioni} di un \speciale{ente} e \specialeb{visualizzare} \speciale{statistiche} globali.

L'utente di tipo "\speciale{fornitore}" deve poter \specialeb{creare} enti \speciale{nuovi}, \specialeb{associarsi} ad uno di essi, \specialeb{creare} \speciale{servizi} ed \speciale{eventi} e \specialeb{visualizzare} \speciale{statistiche} dell'\speciale{ente} con il quale è associato.

Tutti gli \speciale{utenti} devono poter \specialeb{aggiornare} le \speciale{informazioni} del proprio \speciale{account}.

Gli \speciale{eventi} devono essere \speciale{singoli} o \speciale{periodici}. 

Si deve tenere traccia dei \speciale{check-in} falliti.

Il sistema dovrà essere progettato per garantire una gestione efficace delle diverse funzionalità descritte, assicurando un'esperienza utente intuitiva e fluida per tutte le tipologie di utenti."
\end{adjustwidth}
\medskip
La descrizione del prodotto è già abbastanza chiara, ma presenta alcune entità che vengono nominate più di una volta usando dei sinonimi, sarà quindi importante chiarire che si sta parlando sempre della stessa entità e non confondersi. 

\begingroup % localize the following settings      
\setlength{\arrayrulewidth}{0.5mm}
\renewcommand{\arraystretch}{1.5}
\rowcolors{2}{PaleTurquoise}{white}
\begin{longtblr}
[
    caption = {Estrazione delle entità principali},
    label = {tab:Estrazione delle entità principali},
]{
    colspec = {|XXX[2]|},
    rowhead = 2,
    hlines,
    row{even} = {PaleTurquoise},
    row{1} = {SkyBlue},
} 
Termine & Sinonimi usati & Descrizione\\
CityCard & & Tessera che permette l'acquisto di un abbonamento e la fruizione di servizi o eventi\\
Clienti & Utenti & Persone che usufruiscono di servizi offerti da un ente\\
Fornitori & & Persone associate a un ente che forniscono eventi e/o servizi \\
Admin & Amministratore & Persona responsabile della gestione del sito \\
Servizi & & Operazioni svolte per soddisfare le esigenze dei clienti \\
Abbonamento & Sottoscrizione & Contratto che prevede un pagamento una tantum per poter accedere ai servizi o eventi per un periodo\\
Ente & & Un'azienda o un'entità che fornisce eventi e servizi \\
Eventi & & Attività organizzate per riunire persone in occasione specifiche \\
Recensioni & & Commenti o giudizi espressi dai clienti su servizi \\
Sconto & & Ribasso del prezzo originale di un servizio.\\
Check-in & Usufruire & Convalida dell'utilizzo del trasporto pubblico.\\
\end{longtblr}


Lo schema concettuale nella sua versione finale si avvarrà delle seguenti entità e associazioni:




\begin{longtblr}
[
    caption = {Entità e associazioni},
    label = {tab:Entità e associazioni},
]{
    colspec = {|X[3,l]X[1]X[8]|},
    rowhead = 2,
    hlines,
    row{even} = {PalePink},
    row{1} = {pink},
} 
Nome & Tipo & Descrizione\\
Utente & E & Possessore di un account \\
Servizio & E & Attività a pagamento messa a disposizione da un fornitore \\
Evento & E & Avvenimento gratuito con o senza prenotazione \\
Ente & E & Associazioni che forniscono servizi (es. Musei) \\
Cliente & E & Colui che potrà usufruire di servizi ed eventi \\
Fornitore & E & Persona associata a un ente \\
Transazione & A & Acquisto di un servizio \\
Recensione & E & Valutazione di un servizio \\
Carta di credito & E & Mezzo con il quale si effettua la transazione \\
Possiede City Card & A & Lega l'utente alla city card a lui assegnata \\
Possiede Carta Credito & A & Lega l'utente alla sua carta di credito \\
Abbonamento & E & Permette l'utilizzo del trasporto pubblico \\
Abbona & A & Un cliente si abbona ad un abbonamento \\
Organizza & A & Attività che lega il fornitore all'utente garantendo servizi o eventi \\
Lavora & A & Indica per quale ente collabora il fornitore  \\
Admin & E & Utente che ha il controllo della piattaforma \\
Partecipa & A & I clienti partecipano agli eventi \\
Sottoscrive & A & Attività di un utente che si "abbona" ad uno o più fornitori per seguire le novità \\
Banna & A & L'amministratore banna un utente dal sito\\
CityCard & E & Carta che permette di usufruire dei servizi \\
Percentuale sconto  & A & L'esatto importo di riduzione di prezzo\\
Sconti & E & Riduzione di prezzo di un servizio \\
Prenotazione & A & Attività che lega un utente e uno o più eventi laddove è necessaria confermare la propria presenza\\
Trasporti pubblici & E & Lista dei trasporti da interrogare \\
Check-in & A & Lista utilizzi CityCard \\
\end{longtblr}
\endgroup

\subsubsection{Analisi dettagliata di entità e attributi}

\textbf{Utente:} L'utente sarà l'utilizzatore generico del servizio e al database al quale sarà appoggiato. 
Ogni utente dovrà appartenere ad una delle seguenti categorie. 
\begin{itemize}
    \item Cliente: può visionare e comprare i servizi offerti
    \item Fornitore: può creare e offrire servizi
    \item Admin: compiere azioni necessarie per la moderazione e la manutenzione del sistema.
\end{itemize}
Le informazioni minime associate a ciascun utente saranno: 
\begin{itemize}
    \item Nome
    \item Cognome
    \item Codice fiscale
    \item Username
    \item Password
    \item email
    \item stato: bannato o attivo
\end{itemize}

\textbf{Ente:} L'ente sarà l'azienda partner che metterà a disposizione i suoi servizi e gli eventi organizzati in favore dei clienti.
Le informazioni minime associate a ciascun ente saranno:
\begin{itemize}
    \item Nome
    \item Descrizione dell'ente
    \item La data di creazione
\end{itemize}

\textbf{Servizio:} Il servizio il prodotto che il fornitore mette a disposizione nella piattaforma.
Un servizio avrà queste caratteristiche.
\begin{itemize}
    \item Fornitore: sarà l'ente che creerà il servizio
    \item Descrizione
    \item Prezzo
    \item Attivo: il servizio può non essere più in vendita
\end{itemize}

\textbf{Evento:} L'evento è un'attività gratuita messa a disposizione da un ente.
Un ente avrà queste caratteristiche.
\begin{itemize}
    \item Fornitore: sarà l'ente che creerà il servizio
    \item Descrizione
    \item Data di validità: data in cui potrà usufruire dell'evento o il range di date disponibili
    \item Attivo: l'evento può non essere più disponibile
\end{itemize}

\textbf{Abbonamento:} L'abbonamento è una sottoscrizione tramite la quale il cliente potrà accedere alla lista eventi e a quella dei servizi per poterli prenotare o acquistare. Ci sono tre tipi di abbonamento tra cui scegliere, tutte con una durata e un prezzo specifico.
Un abbonamento avrà le seguenti caratteristiche:
\begin{itemize}
    \item Descrizione del tipo di abbonamento
    \item Prezzo
    \item Durata
\end{itemize}

\textbf{CityCard:} La CityCard è una tessera fisica o virtuale che permette la sottoscrizione di un abbonamento.
Un utente può avere solo una CityCard alla volta ed avrà la durata massima di 5 anni.
Una CityCard avrà le seguenti caratteristiche:
\begin{itemize}
    \item Data di emissione
    \item Data di scadenza
    \item Numero identificativo della tessera
\end{itemize}

\textbf{Ban di un utente:} La possibilità di bannare un utente è prerogativa dell'admin che, a sua discrezione, può intercedere un utente dall'utilizzo della piattaforma. Se l'utente viene bannato non gli è più possibile fare il login.
Caratteristiche di questa associazione:
\begin{itemize}
    \item Essere un admin
    \item Il cliente e il fornitore hanno un attributo booleano "bannato" il cui valore cambia in base allo stato in cui si trova (attivo o disattivato).
\end{itemize}

\textbf{Carta di credito:} La carta di credito è lo strumento con la quale si può acquistare un abbonamento, ogni cliente può avere più carte di credito associate al suo account ma solo una può essere predefinita per gli acquisti.
Le caratteristiche della carta di credito sono le seguenti:
\begin{itemize}
    \item Numero della carta di credito
    \item Mese e anno di scadenza
    \item Nome e Cognome del proprietario
    \item Un attributo che chiarisce quale carta di credito è quella di default
\end{itemize}




\vspace{0.5cm}
\subsubsection{Funzionalità richieste dall'applicativo}


Di seguito un elenco delle funzionalità richieste da tutti gli \ul{utenti}:
\begin{enumerate}[label=u\arabic*)]
    \item Registrarsi
    \item Effettuare un login
    \item Modificare i dati del proprio account
\end{enumerate}

\vspace{0.5cm}


Di seguito un elenco delle funzionalità richieste per un \ul{amministratore}:
\begin{enumerate}[label=a\arabic*)]
    \item Visualizzare lista utenti
    \item Bannare gli altri utenti
    \item Resettare recensioni di un ente
    \item Consultare le statistiche
\end{enumerate}

\vspace{0.5cm}


Di seguito un elenco delle funzionalità richieste per l'\ul{cliente}:
\begin{enumerate}[label=c\arabic*)]
    \item Richiedere una CityCard
    \item Sottoscrivere un abbonamento per una CityCard
    \item Aggiungere carte di credito al proprio account
    \item Rendere predefinita una carta di credito
    \item Acquistare un servizio
    \item Prenotare un evento
    \item Lasciare rating ai servizi acquistati (1-5 stelle)
    \item Effettuare checkin per il mezzo di trasporto scelto
\end{enumerate}



Di seguito un elenco delle funzionalità richieste per un \ul{fornitore}: 
\begin{enumerate}[label=b\arabic*)]
    \item Creare enti
    \item Associasi a un ente
    \item Creare servizi
    \item Creare eventi occasionali
    \item Creare eventi periodici
    \item Consultare statistiche riguardo l'ente al quale è associato 
\end{enumerate}